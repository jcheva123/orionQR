<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OrionQR - Control Totem LED</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Roboto&family=Montserrat&family=Lobster&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white font-sans">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-center mb-6">OrionQR - Control Totem LED</h1>
    
    <div class="flex justify-center space-x-4 mb-8">
      <button onclick="selectTotem(1)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Totem 1</button>
      <button onclick="selectTotem(2)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Totem 2</button>
      <button onclick="selectTotem(3)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Totem 3</button>
    </div>

    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-semibold mb-4">Opciones</h2>

      <!-- Cargar Foto/Video -->
      <div class="mb-6">
        <h3 class="text-xl font-medium mb-2">üì∏ Cargar Foto/Video</h3>
        <input type="file" id="mediaInput" accept="image/*,video/*" class="block w-full text-sm text-gray-300 bg-gray-700 border border-gray-600 rounded p-2 mb-2">
        <label class="flex items-center space-x-2 mb-2">
          <input type="checkbox" id="autofitToggle" class="h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 rounded">
          <span>Autofit (ajustar a pantalla completa)</span>
        </label>
        <button onclick="uploadMedia()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Subir y Mostrar</button>
      </div>

      <!-- Color de Fondo -->
      <div class="mb-6">
        <h3 class="text-xl font-medium mb-2">üé® Color de Fondo</h3>
        <input type="color" id="bgColor" class="h-10 w-20 bg-gray-700 border border-gray-600 rounded mb-2">
        <button onclick="applyBgColor()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Aplicar Color Personalizado</button>
        
        <div class="mt-4">
          <h4 class="font-medium mb-2">Fondo Animado</h4>
          <div class="grid grid-cols-2 gap-2">
            <div>
              <label>Color 1:</label>
              <input type="color" id="animColor1" class="h-10 w-20 bg-gray-700 border border-gray-600 rounded">
            </div>
            <div>
              <label>Color 2:</label>
              <input type="color" id="animColor2" class="h-10 w-20 bg-gray-700 border border-gray-600 rounded">
            </div>
            <div>
              <label>Color 3 (opcional):</label>
              <input type="color" id="animColor3" class="h-10 w-20 bg-gray-700 border border-gray-600 rounded">
            </div>
            <div>
              <label>Velocidad Fondo:</label>
              <input type="range" id="animSpeed" min="5" max="30" value="15" class="w-full">
              <span id="animSpeedValue">15s</span>
            </div>
          </div>
          <button onclick="applyAnimatedBg()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded mt-2">Aplicar Fondo Animado</button>
          <button onclick="applyRandomColors()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded mt-2">Colores Random</button>
        </div>
      </div>

      <!-- Texto Personalizado -->
      <div class="mb-6">
        <h3 class="text-xl font-medium mb-2">‚úçÔ∏è Texto Personalizado</h3>
        <select id="fontSelect" class="block w-full bg-gray-700 border border-gray-600 rounded p-2 mb-2">
          <option value="Playfair Display">Playfair Display</option>
          <option value="Roboto">Roboto</option>
          <option value="Montserrat">Montserrat</option>
          <option value="Lobster">Lobster</option>
        </select>
        <select id="fontSize" class="block w-full bg-gray-700 border border-gray-600 rounded p-2 mb-2">
          <option value="20px">Peque√±o (20px)</option>
          <option value="30px">Mediano (30px)</option>
          <option value="40px">Grande (40px)</option>
          <option value="50px">Muy Grande (50px)</option>
        </select>
        <input type="color" id="textColor" class="h-10 w-20 bg-gray-700 border border-gray-600 rounded mb-2">
        <input type="range" id="textPosition" min="0" max="100" value="50" class="w-full mb-2">
        <span id="textPositionValue">50%</span>
        <button onclick="applyText()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Aplicar Texto</button>
        <textarea id="customText" class="block w-full bg-gray-700 border border-gray-600 rounded p-2 mt-2" placeholder="Texto de ejemplo"></textarea>
      </div>

      <!-- Restablecer -->
      <button onclick="resetSettings()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Restablecer</button>
    </div>
  </div>

  <script>
    let selectedTotem = 1;

    function selectTotem(totem) {
      selectedTotem = totem;
      alert(`Totem ${totem} seleccionado`);
    }

    function uploadMedia() {
      const fileInput = document.getElementById('mediaInput');
      const autofit = document.getElementById('autofitToggle').checked;
      const file = fileInput.files[0];
      if (!file) {
        alert('Por favor, selecciona un archivo');
        return;
      }

      const url = URL.createObjectURL(file);
      localStorage.setItem(`totem${selectedTotem}_media`, url);
      localStorage.setItem(`totem${selectedTotem}_autofit`, autofit);
      localStorage.setItem(`totem${selectedTotem}_type`, file.type);
      window.open(`display.html?totem=${selectedTotem}`, '_blank');
    }

    function applyBgColor() {
      const color = document.getElementById('bgColor').value;
      localStorage.setItem(`totem${selectedTotem}_bgColor`, color);
      window.open(`display.html?totem=${selectedTotem}`, '_blank');
    }

    function applyAnimatedBg() {
      const colors = [
        document.getElementById('animColor1').value,
        document.getElementById('animColor2').value,
        document.getElementById('animColor3').value || ''
      ].filter(c => c);
      const speed = document.getElementById('animSpeed').value;
      localStorage.setItem(`totem${selectedTotem}_animBg`, JSON.stringify({ colors, speed }));
      window.open(`display.html?totem=${selectedTotem}`, '_blank');
    }

    function applyRandomColors() {
      const randomColors = Array(3).fill().map(() => `#${Math.floor(Math.random()*16777215).toString(16)}`);
      localStorage.setItem(`totem${selectedTotem}_animBg`, JSON.stringify({ colors: randomColors, speed: '15' }));
      window.open(`display.html?totem=${selectedTotem}`, '_blank');
    }

    function applyText() {
      const text = document.getElementById('customText').value;
      const font = document.getElementById('fontSelect').value;
      const size = document.getElementById('fontSize').value;
      const color = document.getElementById('textColor').value;
      const position = document.getElementById('textPosition').value;
      localStorage.setItem(`totem${selectedTotem}_text`, JSON.stringify({ text, font, size, color, position }));
      window.open(`display.html?totem=${selectedTotem}`, '_blank');
    }

    function resetSettings() {
      localStorage.removeItem(`totem${selectedTotem}_media`);
      localStorage.removeItem(`totem${selectedTotem}_autofit`);
      localStorage.removeItem(`totem${selectedTotem}_type`);
      localStorage.removeItem(`totem${selectedTotem}_bgColor`);
      localStorage.removeItem(`totem${selectedTotem}_animBg`);
      localStorage.removeItem(`totem${selectedTotem}_text`);
      window.open(`display.html?totem=${selectedTotem}`, '_blank');
    }

    document.getElementById('animSpeed').addEventListener('input', () => {
      document.getElementById('animSpeedValue').textContent = `${document.getElementById('animSpeed').value}s`;
    });

    document.getElementById('textPosition').addEventListener('input', () => {
      document.getElementById('textPositionValue').textContent = `${document.getElementById('textPosition').value}%`;
    });
  </script>
</body>
</html>
